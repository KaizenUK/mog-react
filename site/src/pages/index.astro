---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import LifecyclePillars from "../components/LifecyclePillars.astro";
import AuthorityIntro from "../components/AuthorityIntro.astro";
import BrandGrid from "../components/BrandGrid.astro";
import Capabilities from "../components/Capabilities.astro";
import SectorCards from "../components/SectorCards.astro";
import ProofStats from "../components/ProofStats.astro";
import WhyChoose from "../components/WhyChoose.astro";
import FinalCta from "../components/FinalCta.astro";
import { getSitePageBySlug } from "../lib/sanity/sitePages";
import { getNavigationData } from "../lib/sanity/navigation";
import { getClient } from "../lib/sanity/client";

// Use the stega/previewDrafts client when draft-mode cookie is present,
// otherwise the standard published client
const isDraftMode = Astro.cookies.get('sanity-draft-mode')?.value === '1'
const client = getClient(isDraftMode)

const [homePage, navData] = await Promise.all([
  getSitePageBySlug("home", client),
  getNavigationData(),
]);
---

<Layout title="Midland Oil Group â€” UK Lubricant Manufacturer & Supplier">
  <Hero hero={homePage?.hero} slot="above-main" />
  <LifecyclePillars slot="above-main" />
  <AuthorityIntro slot="above-main" />
  <BrandGrid slot="above-main" />
  <Capabilities slot="above-main" />
  <SectorCards slot="above-main" sectors={navData.sectors} />
  <ProofStats slot="above-main" />
  <WhyChoose slot="above-main" />
  <FinalCta slot="above-main" />
</Layout>
